name: Docker Image CI
on:
  push:
    branches: [ "openwrt-18.06" ]
  pull_request:
    branches: [ "openwrt-18.06" ]

jobs:

  build:

    runs-on: ubuntu-latest
    steps:
      - run: apt-get update && apt-get install -y  build-essential  vim  git wget rsync curl time subversion libncurses5-dev zlib1g-dev gawk flex quilt git-core unzip libssl-dev python-dev python-pip  libxml-parser-perl default-jdk
      - run: copy . /root/source
      - run: WORKDIR /root/source
      - run: sh scripts/onion-feed-setup.sh && python scripts/onion-setup-build.py
